---
title: "ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã¨é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°"
emoji: "ğŸ§©"
type: "tech"
topics: ["DDD", "é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "EventStorming", "fsharp", "TypeScript"]
published: true
---

# ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã¨é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®èåˆ

:::message
This article is generated by Claude.
:::

ã“ã‚“ã«ã¡ã¯ï¼ä»Šå›ã¯ã€ŒDomain Modeling Made Functionalã€ã¨ã„ã†ç´ æ™´ã‚‰ã—ã„æœ¬ã‹ã‚‰å­¦ã‚“ã ã€ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆ(DDD)ã¨é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã¤ã„ã¦ãŠè©±ã—ã—ã¾ã™ã€‚ãƒ“ã‚¸ãƒã‚¹ã®è¤‡é›‘ã•ã‚’ã‚³ãƒ¼ãƒ‰ã§æ­£ç¢ºã«è¡¨ç¾ã—ã€ã—ã‹ã‚‚ä¿å®ˆã—ã‚„ã™ã„ã‚·ã‚¹ãƒ†ãƒ ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®å®Ÿè·µçš„ãªæ–¹æ³•è«–ã§ã™ âœ¨

## ã‚„ã‚ŠãŸã„ã“ã¨

ã“ã®è¨˜äº‹ã§ã¯ä»¥ä¸‹ã®ã“ã¨ã‚’ç›®æŒ‡ã—ã¾ã™ï¼š

- EventStormingã‚’ä½¿ã£ã¦ãƒ“ã‚¸ãƒã‚¹ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’æ•´ç†ã™ã‚‹æ–¹æ³•
- ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼ã‚’æ˜ç¢ºã«è­˜åˆ¥ã™ã‚‹é‡è¦æ€§
- ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã¨ã‚³ãƒ¼ãƒ‰ã‚’ä¸€è‡´ã•ã›ã‚‹å…·ä½“çš„ãªæ‰‹æ³•
- é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®å‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æ´»ç”¨ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒªãƒ³ã‚°
- æ¥­å‹™ãƒ—ãƒ­ã‚»ã‚¹ã‚’é–¢æ•°ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã—ã¦è¡¨ç¾ã™ã‚‹æ–¹æ³•
- BPMNã€CMMNã€DMNãªã©ã®æ¨™æº–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°æ‰‹æ³•ã¨DDDã®çµ„ã¿åˆã‚ã›
- æœ€æ–°ã®é–¢æ•°å‹DDDã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

## ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã¨ã¯ä½•ã‹ï¼Ÿ

ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆï¼ˆDDDï¼‰ã¯ã€è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ç„¦ç‚¹ã‚’å½“ã¦ãŸã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ã€‚ã€Œãƒ‰ãƒ¡ã‚¤ãƒ³ã€ã¨ã¯ã€ãƒ“ã‚¸ãƒã‚¹ã®å•é¡Œé ˜åŸŸã®ã“ã¨ã§ã€ä¾‹ãˆã°ã€Œæ³¨æ–‡ç®¡ç†ã€ã‚„ã€Œåœ¨åº«ç®¡ç†ã€ãªã©ãŒè©²å½“ã—ã¾ã™ã€‚

DDDã®ä¸­å¿ƒçš„ãªè€ƒãˆæ–¹ã¯ï¼š

1. ãƒ“ã‚¸ãƒã‚¹é–¢ä¿‚è€…ã¨é–‹ç™ºè€…ãŒå…±é€šã®è¨€èªï¼ˆãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªï¼‰ã‚’ä½¿ã£ã¦ä¼šè©±ã™ã‚‹
2. ãƒ‰ãƒ¡ã‚¤ãƒ³ã®æœ¬è³ªã‚’åæ˜ ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚‹
3. ãã®ãƒ¢ãƒ‡ãƒ«ã‚’ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥è½ã¨ã—è¾¼ã‚€

ã§ã‚‚ã€å¾“æ¥ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã«ã‚ˆã‚‹DDDã®å®Ÿè£…ã§ã¯ã€ã—ã°ã—ã°ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã¨ã‚³ãƒ¼ãƒ‰ã®é–“ã«ã‚®ãƒ£ãƒƒãƒ—ãŒç”Ÿã˜ã¦ã—ã¾ã„ã¾ã™ ğŸ˜“

ãã“ã§ç™»å ´ã™ã‚‹ã®ãŒã€ŒDomain Modeling Made Functionalã€ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ï¼

## EventStormingã«ã‚ˆã‚‹ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®å¯è¦–åŒ–

ã¾ãšã€ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç†è§£ã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ **EventStorming** ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯é–‹ç™ºè€…ã ã‘ã§ãªãã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆï¼ˆãƒ“ã‚¸ãƒã‚¹ã®å°‚é–€å®¶ï¼‰ã‚‚ä¸€ç·’ã«å‚åŠ ã§ãã‚‹ãƒ¯ãƒ¼ã‚¯ã‚·ãƒ§ãƒƒãƒ—å½¢å¼ã®æ‰‹æ³•ã§ã™ã€‚

### EventStormingã®åŸºæœ¬çš„ãªæµã‚Œ

1. å¤§ããªç´™ã‚„ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒœãƒ¼ãƒ‰ä¸Šã«ã€ãƒ“ã‚¸ãƒã‚¹ã§ç™ºç”Ÿã™ã‚‹ã€Œã‚¤ãƒ™ãƒ³ãƒˆã€ã‚’æ™‚ç³»åˆ—ã§ä»˜ç®‹ã«æ›¸ãå‡ºã—ã¦ã„ã
2. ãã‚Œã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¼•ãèµ·ã“ã™ã€Œã‚³ãƒãƒ³ãƒ‰ã€ã‚’ç‰¹å®šã™ã‚‹  
3. ã‚¤ãƒ™ãƒ³ãƒˆã‚„ã‚³ãƒãƒ³ãƒ‰ã«é–¢ã‚ã‚‹ã€Œã‚¢ã‚¯ã‚¿ãƒ¼ã€ï¼ˆäººã‚„ã‚·ã‚¹ãƒ†ãƒ ï¼‰ã‚’ç‰¹å®šã™ã‚‹
4. é–¢é€£ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚„åˆ¶ç´„ã‚’è¿½åŠ ã—ã¦ã„ã

ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’å›³ã§è¡¨ã™ã¨ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ï¼š

```mermaid
graph LR
    A[ã‚¢ã‚¯ã‚¿ãƒ¼] -->|å®Ÿè¡Œã™ã‚‹| B[ã‚³ãƒãƒ³ãƒ‰]
    B -->|å¼•ãèµ·ã“ã™| C[ã‚¤ãƒ™ãƒ³ãƒˆ]
    C -->|å½±éŸ¿ã‚’ä¸ãˆã‚‹| D[åˆ¥ã®ã‚·ã‚¹ãƒ†ãƒ /ãƒ—ãƒ­ã‚»ã‚¹]
    style A fill:#f9d,stroke:#333
    style B fill:#adf,stroke:#333
    style C fill:#ffa,stroke:#333
    style D fill:#dfd,stroke:#333
```

EventStormingã®ç´ æ™´ã‚‰ã—ã„ã¨ã“ã‚ã¯ã€æŠ€è¡“çš„ãªè©³ç´°ã«å…¥ã‚‹å‰ã« **ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼ã®é †åºæ€§** ã‚’æ˜ç¢ºã«ã§ãã‚‹ã“ã¨ã§ã™ã€‚ä¾‹ãˆã°ã€Œæ³¨æ–‡ç¢ºå®šã€â†’ã€Œåœ¨åº«ç¢ºèªã€â†’ã€Œæ”¯æ‰•ã„å‡¦ç†ã€â†’ã€Œå‡ºè·æŒ‡ç¤ºã€ã¨ã„ã†ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼ãŒè¦‹ãˆã¦ãã‚‹ã¨ã€è‡ªç„¶ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ã®å¢ƒç•Œã‚‚æµ®ã‹ã³ä¸ŠãŒã£ã¦ãã¾ã™ã€‚

## ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼ã®è­˜åˆ¥

EventStormingã‚’è¡Œã†ã¨ã€è‡ªç„¶ã«ã€Œã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¨ã‚ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯åˆ¥ã®æ–‡è„ˆã ã‚ˆã­ã€ã¨ã„ã†ä¼šè©±ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚ã“ã‚ŒãŒãƒ‰ãƒ¡ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼ï¼ˆå¢ƒç•Œï¼‰ã®ç™ºè¦‹ã«ã¤ãªãŒã‚Šã¾ã™ï¼

ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªåˆ‡ã‚Šåˆ†ã‘ãŒè¦‹ãˆã¦ãã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼š

```mermaid
graph TD
    subgraph "æ³¨æ–‡ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³"
        A[æ³¨æ–‡å—ä»˜] --> B[æ³¨æ–‡ç¢ºå®š]
    end
    
    subgraph "åœ¨åº«ç®¡ç†ãƒ‰ãƒ¡ã‚¤ãƒ³"
        C[åœ¨åº«ç¢ºèª] --> D[åœ¨åº«å¼•å½“]
    end
    
    subgraph "é…é€ãƒ‰ãƒ¡ã‚¤ãƒ³"
        E[é…é€è¨ˆç”»ä½œæˆ] --> F[å‡ºè·æŒ‡ç¤º]
    end
    
    B --> C
    D --> E
    
    style A fill:#f9f,stroke:#333
    style B fill:#f9f,stroke:#333
    style C fill:#aaf,stroke:#333
    style D fill:#aaf,stroke:#333
    style E fill:#ffa,stroke:#333
    style F fill:#ffa,stroke:#333
```

ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼ã‚’æ˜ç¢ºã«ã™ã‚‹ã“ã¨ã§å¾—ã‚‰ã‚Œã‚‹ãƒ¡ãƒªãƒƒãƒˆã¯å¤§ãã„ã§ã™ï¼š

- ãƒãƒ¼ãƒ ã®åˆ†å‰²ãŒè‡ªç„¶ã«ã§ãã‚‹
- ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã®å¢ƒç•ŒãŒæ˜ç¢ºã«ãªã‚‹
- å„ãƒ‰ãƒ¡ã‚¤ãƒ³å†…éƒ¨ã®å¤‰æ›´ãŒä»–ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã«å½±éŸ¿ã—ã«ãããªã‚‹

ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼ã®è­˜åˆ¥ã¯ã€ã€Œã“ã®æ¦‚å¿µã¯ã“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯ã“ã†ã„ã†æ„å‘³ã€åˆ¥ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ã¯åˆ¥ã®æ„å‘³ã€ã¨ã„ã† **ãƒã‚¦ãƒ³ãƒ‡ãƒƒãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ** ã®ç™ºè¦‹ã«ã‚‚ã¤ãªãŒã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€Œå•†å“ã€ã¨ã„ã†è¨€è‘‰ã¯è²©å£²éƒ¨é–€ã¨å€‰åº«éƒ¨é–€ã§ã¯ç•°ãªã‚‹å±æ€§ã‚„æŒ¯ã‚‹èˆã„ã‚’æŒã¤ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

## ãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã¨ã‚³ãƒ¼ãƒ‰ã®ä¸€è‡´

ã€ŒDomain Modeling Made Functionalã€ã®æœ¬è³ªçš„ãªä¾¡å€¤ã¯ã€æŠ½å‡ºã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³çŸ¥è­˜ã‚’ã‚³ãƒ¼ãƒ‰ã¨ä¸€è‡´ã•ã›ã‚‹æ–¹æ³•ã‚’æä¾›ã—ã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚

å¾“æ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ï¼š
1. ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚’å›³ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§è¡¨ç¾
2. ãã‚Œã‚’ã‚‚ã¨ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
3. æ™‚é–“ãŒçµŒã¤ã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨å®Ÿè£…ã«ã‚ºãƒ¬ãŒç”Ÿã˜ã‚‹ ğŸ˜±

ä¸€æ–¹ã€ã“ã®æœ¬ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã¯ï¼š
1. ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚’ **å‹** ã¨ã—ã¦ç›´æ¥è¡¨ç¾
2. ãã®å‹ã‚’çµ„ã¿åˆã‚ã›ã¦ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’æ§‹ç¯‰
3. ã‚³ãƒ¼ãƒ‰è‡ªä½“ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãªã‚‹ ğŸ‰

### å‹ã‚’ä½¿ã£ãŸãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒªãƒ³ã‚°

ä¾‹ãˆã°ã€ã€Œæ³¨æ–‡ã€ã¨ã„ã†ãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚å¿µã‚’è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã‚Œã‚’F#ï¼ˆã¾ãŸã¯ä»–ã®é–¢æ•°å‹è¨€èªï¼‰ã®å‹ã§è¡¨ç¾ã™ã‚‹ã¨ï¼š

```fsharp
// å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
type OrderId = OrderId of string
type ProductId = ProductId of string
type Quantity = Quantity of int

// è£½å“ã‚¢ã‚¤ãƒ†ãƒ 
type OrderItem = {
    ProductId : ProductId
    Quantity : Quantity
}

// æ³¨æ–‡ãã®ã‚‚ã®
type Order = {
    OrderId : OrderId
    Items : OrderItem list
    ShippingAddress : Address
    OrderDate : DateTime
}

// å¯èƒ½ãªæ³¨æ–‡çŠ¶æ…‹ï¼ˆä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ï¼‰
type OrderStatus = 
    | Draft
    | Placed
    | Paid
    | Shipped
    | Delivered
    | Cancelled
```

ã“ã®ã‚ˆã†ã«å‹å®šç¾©ã‚’èª­ã‚€ã ã‘ã§ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®æ§‹é€ ãŒã™ãã«ç†è§£ã§ãã¾ã™ã­ï¼

ç‰¹ã«ç´ æ™´ã‚‰ã—ã„ã®ã¯ã€ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆDiscriminated Union/ä»£æ•°çš„ç›´å’Œå‹ï¼‰ã‚’ä½¿ã£ãŸè¡¨ç¾ã§ã™ã€‚ä¾‹ãˆã°OrderStatusã¯ã€Œæ³¨æ–‡ã¯å¿…ãšDraft, Placed, Paid...ã®ã„ãšã‚Œã‹ã®çŠ¶æ…‹ã§ã‚ã‚‹ã€ã¨ã„ã† **ãƒ‰ãƒ¡ã‚¤ãƒ³ã®åˆ¶ç´„** ã‚’å‹ã‚·ã‚¹ãƒ†ãƒ ã§è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚

## é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã«ã‚ˆã‚‹æ¥­å‹™ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ¢ãƒ‡ãƒªãƒ³ã‚°

ã“ã®æœ¬ã®ã‚‚ã†ä¸€ã¤ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆã¯ã€æ¥­å‹™ãƒ—ãƒ­ã‚»ã‚¹è‡ªä½“ã‚’é–¢æ•°ã¨è¦‹ãªã™ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ã€‚

ä¾‹ãˆã°ã€Œæ³¨æ–‡ãƒ—ãƒ­ã‚»ã‚¹ã€ã‚’F#ã§è¡¨ç¾ã™ã‚‹ã¨ï¼š

```fsharp
// æ³¨æ–‡ãƒ—ãƒ­ã‚»ã‚¹ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
type PlaceOrderError = 
    | InvalidOrder
    | ProductOutOfStock
    | PaymentRejected

// Input â†’ (æˆåŠŸ or å¤±æ•—) ã¨ã„ã†å‹
type PlaceOrderWorkflow = 
    UnvalidatedOrder -> Result<Order, PlaceOrderError>

// å®Ÿéš›ã®å®Ÿè£…ã¯å°ã•ãªé–¢æ•°ã®çµ„ã¿åˆã‚ã›
let placeOrder : PlaceOrderWorkflow = 
    fun unvalidatedOrder ->
        unvalidatedOrder
        |> validateOrder                  // æ³¨æ–‡ã‚’æ¤œè¨¼
        |> Result.bind checkInventory     // åœ¨åº«ç¢ºèª
        |> Result.bind calculatePrices    // ä¾¡æ ¼è¨ˆç®—
        |> Result.bind processPayment     // æ”¯æ‰•ã„å‡¦ç†
        |> Result.map createOrder         // æ³¨æ–‡ä½œæˆ
```

ã“ã®ã‚ˆã†ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®åˆ©ç‚¹ã¯ï¼š

1. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å…¨ä½“ãŒä¸€ç›®ã§ã‚ã‹ã‚‹ ğŸ‘€
2. å„ã‚¹ãƒ†ãƒƒãƒ—ã®å…¥å‡ºåŠ›ãŒå‹ã«ã‚ˆã£ã¦ä¿è¨¼ã•ã‚Œã‚‹
3. ã‚¨ãƒ©ãƒ¼å‡¦ç†ãŒæ˜ç¤ºçš„
4. å‰¯ä½œç”¨ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œãªã©ï¼‰ã‚’åˆ†é›¢ã—ã‚„ã™ã„

## ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ã‚ˆã‚‹å‹ã®æ¥ç¶š

ã€ŒDomain Modeling Made Functionalã€ã§ã¯ã€æ¥­å‹™ãƒ—ãƒ­ã‚»ã‚¹ã‚’ã€Œãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€ã¨ã—ã¦è¡¨ç¾ã—ã¾ã™ã€‚å„ã‚¹ãƒ†ãƒƒãƒ—ã¯ã€ã‚ã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³å‹ã‹ã‚‰åˆ¥ã®ãƒ‰ãƒ¡ã‚¤ãƒ³å‹ã¸ã®å¤‰æ›ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¾ã™ã€‚

```mermaid
graph LR
    A[UnvalidatedOrder] -->|validateOrder| B[ValidatedOrder]
    B -->|checkInventory| C[InventoryCheckedOrder]
    C -->|calculatePrices| D[PricedOrder]
    D -->|processPayment| E[PaidOrder]
    E -->|createOrder| F[Order]
    style A fill:#f9f,stroke:#333
    style B fill:#adf,stroke:#333
    style C fill:#fda,stroke:#333
    style D fill:#afd,stroke:#333
    style E fill:#daf,stroke:#333
    style F fill:#faa,stroke:#333
```

ã“ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å„å¤‰æ›ã¯ **å‹å®‰å…¨** ã§ã™ã€‚ã¤ã¾ã‚ŠPricedOrderã‚’Skipã—ã¦ã€ValidatedOrderã‹ã‚‰ã„ããªã‚ŠPaidOrderã«å¤‰æ›ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ã“ã‚Œã«ã‚ˆã‚Šãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ãŒç ´ã‚‰ã‚Œã‚‹ã“ã¨ã‚’é˜²ãã¾ã™ ğŸ›¡ï¸

å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€Resultãƒ¢ãƒŠãƒ‰ã‚’ä½¿ã£ã¦ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚‚çµ„ã¿è¾¼ã¾ã‚Œã¾ã™ï¼š

```fsharp
let placeOrder unvalidatedOrder =
    let validatedOrderResult = 
        validateOrder unvalidatedOrder  // Result<ValidatedOrder, ValidationError>
        
    match validatedOrderResult with
    | Error err -> Error err
    | Ok validatedOrder ->
        let inventoryCheckedResult = 
            checkInventory validatedOrder  // Result<InventoryCheckedOrder, InventoryError>
            
        match inventoryCheckedResult with
        | Error err -> Error err
        | Ok inventoryCheckedOrder ->
            // ä»¥ä¸‹åŒæ§˜ã«å‡¦ç†ãŒç¶šã...
```

ã‚‚ã¡ã‚ã‚“ã€ä¸Šè¨˜ã®å†—é•·ãªmatchãƒ‘ã‚¿ãƒ¼ãƒ³ã¯`Result.bind`ãªã©ã‚’ä½¿ã£ã¦ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆã«æ›¸ã‘ã¾ã™ï¼š

```fsharp
let placeOrder unvalidatedOrder =
    validateOrder unvalidatedOrder
    |> Result.bind checkInventory
    |> Result.bind calculatePrices
    // ... æ®‹ã‚Šã®å‡¦ç†
```

## TypeScriptã§ã®å®Ÿè·µä¾‹

F#ã¯ç´ æ™´ã‚‰ã—ã„è¨€èªã§ã™ãŒã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯TypeScriptãªã©ã§å®Ÿè£…ã™ã‚‹ã“ã¨ã‚‚å¤šã„ã§ã—ã‚‡ã†ã€‚TypeScriptã§ã‚‚åŒæ§˜ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒãŒé©ç”¨ã§ãã¾ã™ï¼

```typescript
// å€¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
type OrderId = string & { readonly _brand: unique symbol }
type ProductId = string & { readonly _brand: unique symbol }

// æ³¨æ–‡ã‚¢ã‚¤ãƒ†ãƒ 
interface OrderItem {
  productId: ProductId;
  quantity: number;
}

// æ³¨æ–‡çŠ¶æ…‹ï¼ˆä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ï¼‰
type OrderStatus = 
  | { kind: 'Draft' }
  | { kind: 'Placed', placedDate: Date }
  | { kind: 'Paid', paymentId: string }
  | { kind: 'Shipped', trackingNumber: string }
  | { kind: 'Delivered', deliveryDate: Date }
  | { kind: 'Cancelled', reason: string };

// ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®é–¢æ•°å‹
type PlaceOrderError = 
  | { kind: 'InvalidOrder', message: string }
  | { kind: 'ProductOutOfStock', productId: ProductId }
  | { kind: 'PaymentFailed', reason: string };

type Result<T, E> = 
  | { kind: 'Ok', value: T }
  | { kind: 'Error', error: E };

type PlaceOrderWorkflow = 
  (unvalidatedOrder: UnvalidatedOrder) => Result<Order, PlaceOrderError>;
```

TypeScriptã§ã‚‚å‹ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã®åˆ¶ç´„ã‚’ã‚³ãƒ¼ãƒ‰ã§è¡¨ç¾ã§ãã¾ã™ï¼

## å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®é©ç”¨

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ´»ç”¨ã™ã‚‹éš›ã®ãƒã‚¤ãƒ³ãƒˆã‚’ã„ãã¤ã‹ç´¹ä»‹ã—ã¾ã™ï¼š

### 1. æ®µéšçš„ãªå°å…¥

ã„ããªã‚Šå…¨ã¦ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’é–¢æ•°å‹ã§å®Ÿè£…ã™ã‚‹ã®ã§ã¯ãªãã€é‡è¦ãªã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³ã‹ã‚‰å§‹ã‚ã‚‹ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚ä¾‹ãˆã°ï¼š

```mermaid
graph TD
    subgraph "ã‚³ã‚¢ãƒ‰ãƒ¡ã‚¤ãƒ³(é–¢æ•°å‹ã§å®Ÿè£…)"
        A[æ³¨æ–‡å‡¦ç†] --> B[ä¾¡æ ¼è¨ˆç®—]
        B --> C[æ”¯æ‰•ã„å‡¦ç†]
    end
    
    subgraph "ã‚µãƒãƒ¼ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³(å¾“æ¥ã®å®Ÿè£…)"
        D[ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†]
        E[é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ]
    end
    
    C --> E
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#f9f,stroke:#333,stroke-width:2px
    style C fill:#f9f,stroke:#333,stroke-width:2px
    style D fill:#ddd,stroke:#333
    style E fill:#ddd,stroke:#333
```

### 2. ãƒãƒ¼ãƒ ã®å­¦ç¿’æ›²ç·šã‚’è€ƒæ…®ã™ã‚‹

é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚„DDDã¯å­¦ç¿’ã‚³ã‚¹ãƒˆãŒé«˜ã„ã®ã§ã€ãƒãƒ¼ãƒ å…¨ä½“ã§åŸºæœ¬æ¦‚å¿µã‚’å­¦ã¶æ™‚é–“ã‚’ç¢ºä¿ã—ã¾ã—ã‚‡ã†ã€‚

### 3. å…±é€šè¨€èªã®æ§‹ç¯‰

ä½•ã‚ˆã‚Šã‚‚é‡è¦ãªã®ã¯ã€ãƒ“ã‚¸ãƒã‚¹é–¢ä¿‚è€…ã¨é–‹ç™ºè€…ãŒåŒã˜è¨€èªã§ä¼šè©±ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§ã™ã€‚EventStormingã‚„å‹å®šç¾©ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ç”¨èªé›†ï¼ˆãƒ¦ãƒ“ã‚­ã‚¿ã‚¹è¨€èªï¼‰ã‚’ä½œæˆã™ã‚‹ã¨ã„ã„ã§ã—ã‚‡ã†ã€‚

## BPMNã€CMMNã€DMNã‚’æ´»ç”¨ã—ãŸæ¥­å‹™ãƒ¢ãƒ‡ãƒªãƒ³ã‚°

é–¢æ•°å‹DDDã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«åŠ ãˆã¦ã€æ¥­å‹™ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã®æ¨™æº–çš„ãªè¡¨è¨˜æ³•ã§ã‚ã‚‹BPMNã€CMMNã€DMNã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªæ¥­å‹™ãƒ¢ãƒ‡ãƒ«ã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚ã“ã‚Œã‚‰ã®æ¨™æº–ã¯äº’ã„ã«è£œå®Œã—åˆã†ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ ğŸ§©

### BPMNã¨ã¯

BPMNï¼ˆBusiness Process Model and Notationï¼‰ã¯æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ—ãƒ­ã‚»ã‚¹ã®ãŸã‚ã®ãƒ¢ãƒ‡ãƒªãƒ³ã‚°è¡¨è¨˜æ³•ã§ã™ã€‚é †åºãŒæ˜ç¢ºã§ã€æ¡ä»¶åˆ†å²ã‚„ãƒ«ãƒ¼ãƒ—ãªã©ã®åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼ã‚’æŒã¤ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¾ã™ã‚‹ã®ã«é©ã—ã¦ã„ã¾ã™ã€‚

```mermaid
graph TD
    A[é–‹å§‹] --> B{æ³¨æ–‡é¡ã¯1ä¸‡å††ä»¥ä¸Šã‹?}
    B -->|Yes| C[é€æ–™ç„¡æ–™]
    B -->|No| D[é€æ–™è¿½åŠ ]
    C --> E[å‡ºè·å‡¦ç†]
    D --> E
    E --> F[çµ‚äº†]
    style A fill:#f9f,stroke:#333
    style B fill:#adf,stroke:#333
    style C fill:#fda,stroke:#333
    style D fill:#fda,stroke:#333
    style E fill:#afd,stroke:#333
    style F fill:#f9f,stroke:#333
```

### CMMNã¨ã¯

CMMNï¼ˆCase Management Model and Notationï¼‰ã¯ã‚±ãƒ¼ã‚¹ç®¡ç†ã®ãŸã‚ã®ãƒ¢ãƒ‡ãƒªãƒ³ã‚°è¡¨è¨˜æ³•ã§ã™ã€‚ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã®æ¥­å‹™ã‚„ä¾‹å¤–ãŒå¤šãã€å®Ÿè¡Œé †åºãŒçŠ¶æ³ã«ã‚ˆã£ã¦å¤‰ã‚ã‚‹ã‚ˆã†ãªæŸ”è»Ÿãªãƒ—ãƒ­ã‚»ã‚¹ã‚’è¡¨ç¾ã™ã‚‹ã®ã«é©ã—ã¦ã„ã¾ã™ CMMNã¯BPMNã‚ˆã‚Šã‚‚ã€Œã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ã€é©å¿œæ€§ãŒé«˜ãã€æŸ”è»Ÿã€ã§ã€é †åºãŒæ±ºã¾ã£ã¦ã„ãªã„ã‚¢ãƒ‰ãƒ›ãƒƒã‚¯ãªã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ã«é©ã—ã¦ã„ã¾ã™ã€‚

ä¾‹ãˆã°ã€é¡§å®¢ã‹ã‚‰ã®å•ã„åˆã‚ã›å¯¾å¿œã‚„ã‚¯ãƒ¬ãƒ¼ãƒ å‡¦ç†ãªã©ã€çŠ¶æ³ã«å¿œã˜ã¦æŸ”è»Ÿã«å¯¾å¿œãŒå¤‰ã‚ã‚‹ã‚±ãƒ¼ã‚¹ã¯CMMNã§è¡¨ç¾ã™ã‚‹ã¨ã‚ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã™ã€‚

### DMNã¨ã¯

DMNï¼ˆDecision Model and Notationï¼‰ã¯æ„æ€æ±ºå®šãƒ­ã‚¸ãƒƒã‚¯ã‚’ãƒ¢ãƒ‡ãƒ«åŒ–ã™ã‚‹ãŸã‚ã®è¡¨è¨˜æ³•ã§ã™ã€‚è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã‚„åˆ¤æ–­åŸºæº–ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«å½¢å¼ã§è¡¨ç¾ã§ãã¾ã™ DMNã¯BPMNã‚„CMMNã®ãƒ—ãƒ­ã‚»ã‚¹ã‚„ã‚±ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹æ±ºå®šãƒ¢ãƒ‡ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚

ä¾‹ãˆã°ã€ä¸ä¿¡åˆ¤æ–­ã®ãƒ«ãƒ¼ãƒ«ã‚’DMNã§è¡¨ç¾ã™ã‚‹ã¨ï¼š

```mermaid
graph TD
    subgraph "ä¸ä¿¡åˆ¤æ–­DMN"
        A["å¹´åï¼ˆä¸‡å††ï¼‰"] --> D{"åˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯"}
        B["å‹¤ç¶šå¹´æ•°"] --> D
        C["éå»ã®å–å¼•å®Ÿç¸¾"] --> D
        D --> E["ä¸ä¿¡ã‚¹ã‚³ã‚¢"]
    end
    style A fill:#f9f,stroke:#333
    style B fill:#adf,stroke:#333
    style C fill:#fda,stroke:#333
    style D fill:#afd,stroke:#333
    style E fill:#daf,stroke:#333
```

### 3ã¤ã®æ¨™æº–ã‚’çµ„ã¿åˆã‚ã›ã‚‹æ„ç¾©

ã“ã‚Œã‚‰ã®æ¨™æº–ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€æ¥­å‹™ã®ç•°ãªã‚‹å´é¢ã‚’é©åˆ‡ãªãƒ¢ãƒ‡ãƒ«ã§è¡¨ç¾ã§ãã¾ã™ BPMNã€CMMNã€DMNã¯äº’ã„ã«è£œå®Œã—åˆã†ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€ã€Œãƒ—ãƒ­ã‚»ã‚¹æ”¹å–„æ¨™æº–ã®ãƒˆãƒªãƒ—ãƒ«ã‚¯ãƒ©ã‚¦ãƒ³ã€ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚

- **BPMN**: æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ—ãƒ­ã‚»ã‚¹ãƒ•ãƒ­ãƒ¼
- **CMMN**: ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ã®æŸ”è»Ÿãªã‚±ãƒ¼ã‚¹å‡¦ç†
- **DMN**: è¤‡é›‘ãªæ„æ€æ±ºå®šãƒ«ãƒ¼ãƒ«

```mermaid
graph TD
    subgraph "BPMNãƒ—ãƒ­ã‚»ã‚¹"
        A[æ³¨æ–‡å—ä»˜] --> B[å…¥åŠ›æ¤œè¨¼]
        B --> C[æ³¨æ–‡å‡¦ç†]
        C --> D[å‡ºè·æŒ‡ç¤º]
    end
    
    subgraph "CMMNã‚±ãƒ¼ã‚¹ç®¡ç†"
        E[ã‚¯ãƒ¬ãƒ¼ãƒ å—ä»˜] --> F[çŠ¶æ³è©•ä¾¡]
        F -.-> G[è¿”é‡‘å‡¦ç†]
        F -.-> H[ä»£æ›¿å“ç™ºé€]
        F -.-> I[èª¬æ˜å¯¾å¿œã®ã¿]
    end
    
    subgraph "DMNæ„æ€æ±ºå®š"
        J["ä¾¡æ ¼æ±ºå®šãƒ«ãƒ¼ãƒ«"]
        K["å‰²å¼•åˆ¤æ–­ãƒ«ãƒ¼ãƒ«"]
    end
    
    B --> J
    C --> K
    F --> K
    
    style A fill:#f9f,stroke:#333
    style B fill:#adf,stroke:#333
    style C fill:#fda,stroke:#333
    style D fill:#afd,stroke:#333
    style E fill:#daf,stroke:#333
    style F fill:#faa,stroke:#333
    style G fill:#afd,stroke:#333
    style H fill:#afd,stroke:#333
    style I fill:#afd,stroke:#333
    style J fill:#fda,stroke:#333
    style K fill:#fda,stroke:#333
```

### DDDã¨ã®ç›¸ä¹—åŠ¹æœ

ã“ã‚Œã‚‰ã®æ¨™æº–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°æ‰‹æ³•ã¯ã€DDDï¼ˆç‰¹ã«æˆ¦ç•¥çš„è¨­è¨ˆï¼‰ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨éå¸¸ã«å¼·åŠ›ã§ã™ DDDã¯ãƒ“ã‚¸ãƒã‚¹ã®ç›®çš„ã«æ²¿ã£ãŸé«˜å“è³ªãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆã‚’ä½œæˆã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã™ãŒã€ã“ã‚Œã‚‰ã®ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã¯åˆ¥ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§ç®¡ç†ã§ãã‚‹ã¨ã„ã†åˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

- **BPMN/CMMN/DMN**: ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«
- **EventStorming**: ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ç™ºè¦‹ã¨å¢ƒç•Œã®è­˜åˆ¥
- **é–¢æ•°å‹DDD**: ç™ºè¦‹ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã®ã‚³ãƒ¼ãƒ‰å®Ÿè£…

ã“ã®çµ„ã¿åˆã‚ã›ã«ã‚ˆã‚Šã€ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã‚’å¯è¦–åŒ–ã—ã€ãã®ãƒ¢ãƒ‡ãƒ«ã‚’é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§å¿ å®Ÿã«å®Ÿè£…ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## é–¢æ•°å‹DDDã®æœ€æ–°ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### Railway Oriented Programming

é–¢æ•°å‹DDDã®å®Ÿè£…ã§æ³¨ç›®ã™ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸€ã¤ãŒã€ŒRailway Oriented Programmingï¼ˆé‰„é“æŒ‡å‘ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ï¼‰ã€ã§ã™ ã“ã‚Œã¯ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ã€ã‚³ãƒ¼ãƒ‰ã‚’é‰„é“ã®ãƒ¬ãƒ¼ãƒ«ã«æ²¿ã£ãŸä¸€é€£ã®é–¢æ•°ã¨ã—ã¦åˆ†å‰²ã—ã€å„é–¢æ•°ã¯æˆåŠŸã™ã‚‹ã¨ãƒ¬ãƒ¼ãƒ«ã«æ²¿ã£ã¦é€²ã¿ã€å¤±æ•—ã™ã‚‹ã¨åˆ¥ã®ãƒ¬ãƒ¼ãƒ«ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ã€‚

```mermaid
graph LR
    A[å…¥åŠ›] --> B[ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³]
    B -->|æˆåŠŸ| C[ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯]
    B -->|å¤±æ•—| E[ã‚¨ãƒ©ãƒ¼å‡¦ç†]
    C -->|æˆåŠŸ| D[å‡ºåŠ›]
    C -->|å¤±æ•—| E
    style A fill:#f9f,stroke:#333
    style B fill:#adf,stroke:#333
    style C fill:#fda,stroke:#333
    style D fill:#afd,stroke:#333
    style E fill:#daf,stroke:#333
```

ã“ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯ã€F#ã®`Result`å‹ã‚„TypeScriptã®åˆ¤åˆ¥å…±ç”¨ä½“ã‚’ä½¿ã£ã¦å®Ÿè£…ã§ãã¾ã™ã€‚

### ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆADTï¼‰ã«ã‚ˆã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒªãƒ³ã‚°

æœ€æ–°ã®é–¢æ•°å‹DDDã§ã¯ã€ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹ï¼ˆAlgebraic Data Typesï¼‰ã‚’ä½¿ã£ã¦ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã«ã¯ADTã‚’ä½¿ç”¨ã—ã€ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¯ç´”ç²‹é–¢æ•°ã§å‡¦ç†ã—ã¾ã™ã€‚ãƒ“ã‚¸ãƒã‚¹ãƒ¢ãƒ‡ãƒ«ã¯çŠ¶æ…‹é·ç§»ã¨ã—ã¦è¡¨ç¾ã§ãã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’çŠ¶æ…‹æ©Ÿæ¢°ã¨ã—ã¦ãƒ¢ãƒ‡ãƒ«åŒ–ã§ãã¾ã™ã€‚

```typescript
// é¡§å®¢ç™»éŒ²ãƒ—ãƒ­ã‚»ã‚¹ã®çŠ¶æ…‹ã‚’è¡¨ç¾ã™ã‚‹ä»£æ•°çš„ãƒ‡ãƒ¼ã‚¿å‹
type Registration = 
  | { kind: 'New', email: string }
  | { kind: 'Pending', userId: string, email: string }
  | { kind: 'Verified', userId: string, email: string, verifiedAt: Date }
  | { kind: 'Rejected', reason: string };

// çŠ¶æ…‹é·ç§»ã‚’è¡¨ã™é–¢æ•°
const submitEmail = (email: string): Registration => ({
  kind: 'New',
  email
});

const processSubmission = (reg: Registration): Registration => {
  if (reg.kind !== 'New') throw new Error('Invalid state');
  
  return {
    kind: 'Pending',
    userId: generateUserId(),
    email: reg.email
  };
};
```

### ä¸å¤‰ãƒ‡ãƒ¼ã‚¿ã¨ç´”ç²‹é–¢æ•°

é–¢æ•°å‹DDDã®ã‚³ã‚¢ãƒ—ãƒªãƒ³ã‚·ãƒ‘ãƒ«ã®ä¸€ã¤ã¯ã€ãƒ‡ãƒ¼ã‚¿ã®ä¸å¤‰æ€§ã¨é–¢æ•°ã®ç´”ç²‹æ€§ã§ã™ ç´”ç²‹é–¢æ•°ã¯å‰¯ä½œç”¨ãŒãªãã€ãƒ†ã‚¹ãƒˆãŒéå¸¸ã«ç°¡å˜ã§ã€ãƒ¢ãƒƒã‚¯ãŒä¸è¦ã§ã™ã€‚ã“ã‚Œã¯ã€Œç´”ç²‹ãªã€ã‚³ãƒ¼ãƒ‰ã¨ä¸ç´”ãª/çŠ¶æ…‹ã‚’æŒã¤ã‚³ãƒ¼ãƒ‰ã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ã§å®Ÿç¾ã—ã¾ã™ã€‚

```typescript
// ä¸å¤‰ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
type Order = Readonly<{
  id: OrderId;
  items: ReadonlyArray<OrderItem>;
  total: Money;
}>;

// ç´”ç²‹é–¢æ•° - å…¥åŠ›ã‚’å¤‰æ›´ã›ãšã€æ–°ã—ã„å€¤ã‚’è¿”ã™
const addItem = (order: Order, item: OrderItem): Order => ({
  ...order,
  items: [...order.items, item],
  total: addMoney(order.total, item.price)
});
```

### ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã®è¦ªå’Œæ€§

é–¢æ•°å‹DDDã¯ã€ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ï¼ˆãƒãƒ¼ãƒˆã¨ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ï¼‰ã¨ã®è¦ªå’Œæ€§ãŒé«˜ã„ã§ã™ é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¨DDDã®çµ„ã¿åˆã‚ã›ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹æŒ‡å‘ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚„ãƒ˜ã‚­ã‚µã‚´ãƒŠãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«è‡ªç„¶ã«ã¤ãªãŒã‚Šã¾ã™ã€‚

```mermaid
graph TD
    subgraph "ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ï¼ˆç´”ç²‹é–¢æ•°ï¼‰"
        A[ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«]
        B[ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯]
    end
    
    subgraph "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤"
        C[ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹]
    end
    
    subgraph "ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å±¤ï¼ˆå‰¯ä½œç”¨ï¼‰"
        D[APIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©]
        E[ãƒªãƒã‚¸ãƒˆãƒªå®Ÿè£…]
        F[å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹]
    end
    
    C --> A
    C --> B
    D --> C
    C --> E
    C --> F
    
    style A fill:#f9f,stroke:#333
    style B fill:#adf,stroke:#333
    style C fill:#fda,stroke:#333
    style D fill:#afd,stroke:#333
    style E fill:#afd,stroke:#333
    style F fill:#afd,stroke:#333
```

ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã¯ã€ãƒ‰ãƒ¡ã‚¤ãƒ³å±¤ã‚’ç´”ç²‹é–¢æ•°ã§å®Ÿè£…ã—ã€å‰¯ä½œç”¨ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚„APIå‘¼ã³å‡ºã—ï¼‰ã‚’ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼å±¤ã«æŠ¼ã—å‡ºã™ã“ã¨ã§ã€ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ã¨ä¿å®ˆæ€§ã‚’é«˜ã‚ã¦ã„ã¾ã™ã€‚

## ã¾ã¨ã‚

ã€ŒDomain Modeling Made Functionalã€ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’ã¾ã¨ã‚ã‚‹ã¨ï¼š

1. **EventStorming** ã§ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã®æµã‚Œã‚’è¦–è¦šåŒ–
2. **ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒã‚¦ãƒ³ãƒ€ãƒªãƒ¼** ã‚’æ˜ç¢ºã«è­˜åˆ¥
3. ãƒ‰ãƒ¡ã‚¤ãƒ³æ¦‚å¿µã‚’ **å‹** ã§è¡¨ç¾
4. ãƒ“ã‚¸ãƒã‚¹ãƒ—ãƒ­ã‚»ã‚¹ã‚’ **é–¢æ•°ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³** ã¨ã—ã¦å®Ÿè£…
5. å‹ã‚·ã‚¹ãƒ†ãƒ ã§ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«ã‚’å¼·åˆ¶
6. **BPMN/CMMN/DMN** ã§æ¥­å‹™ãƒ¢ãƒ‡ãƒ«ã‚’æ¨™æº–åŒ–
7. **Railway Oriented Programming** ã§ã‚¨ãƒ©ãƒ¼å‡¦ç†ã‚’ã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆã«

ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã®ä¸€ç•ªã®é­…åŠ›ã¯ã€ã€Œã‚³ãƒ¼ãƒ‰ = ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«ã€ã¨ã„ã†ç‚¹ã§ã™ã€‚ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã ã‘ã§ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ«ãƒ¼ãƒ«ã‚„åˆ¶ç´„ãŒã‚ã‹ã‚Šã€å¤‰æ›´ãŒå¿…è¦ã«ãªã£ã¦ã‚‚ã€ã©ã“ã‚’ã©ã†å¤‰æ›´ã™ã¹ãã‹ãŒæ˜ç¢ºã§ã™ã€‚

ãƒ‰ãƒ¡ã‚¤ãƒ³é§†å‹•è¨­è¨ˆã¨é–¢æ•°å‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®çµ„ã¿åˆã‚ã›ã¯ã€è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒã¤ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºã«ç‰¹ã«æœ‰åŠ¹ã§ã™ã€‚ã•ã‚‰ã«ã€BPMNã€CMMNã€DMNã¨ã„ã£ãŸæ¨™æº–ãƒ¢ãƒ‡ãƒªãƒ³ã‚°æ‰‹æ³•ã‚’å–ã‚Šå…¥ã‚Œã‚‹ã“ã¨ã§ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã‚ˆã‚Šå††æ»‘ã«ãªã‚Šã¾ã™ã€‚

ã“ã®è¨˜äº‹ãŒçš†ã•ã‚“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ ğŸš€

## å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [Domain Modeling Made Functional - Scott Wlaschinè‘—](https://pragprog.com/titles/swdddf/domain-modeling-made-functional/)
- [F# for Fun and Profit](https://fsharpforfunandprofit.com/)
- [Example Code Repository](https://github.com/swlaschin/DomainModelingMadeFunctional)
- [EventStorming - Alberto Brandoliniè‘—](https://www.eventstorming.com/)
- [Zennã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹é–¢é€£è¨˜äº‹](https://zenn.dev/labbase/articles/b1c513c32fe15e)
- [BPMNã€CMMNã€DMNã®å…¬å¼ä»•æ§˜ - OMG](https://www.omg.org/)
- [FunctionalDDD GitHub](https://xavierjohn.github.io/FunctionalDDD/)
